<div hx-swap-oob="outerHTML:#main-content" id="main-content" class="flex flex-col h-full bg-slate-900/5 overflow-y-auto">
  <div class="w-full flex flex-row justify-between items-center gap-x-2 border-b border-slate-800 px-3 py-2">
    <!--<div id="budgets-tab-bar" class="flex flex-row rounded-lg border border-slate-800 bg-gray-950">-->
    <div id="accounts-partial-tabs" class="text-xs font-semibold text-slate-500">
      <script>
        tabs = document.getElementById("accounts-partial-tabs")
        console.log("Hey there")
        console.log(tabs.children)
        for (const child of tabs.children) {
          console.log()   
        }
      </script>
      <button id="banking-tab" hx-get="/accounts/banking" class="tab-active rounded-md border border-slate-700 py-1 px-2 bg-gray-900 text-xs font-semibold text-slate-300">Banking</button>
      <button id="debts-tab" hx-get="/accounts/debts" class="tab rounded-md border border-slate-900 py-1 px-2 text-xs font-semibold text-slate-500">Debts</button>
      <button id="investments-tab" hx-get="/accounts/investments" class=" tab rounded-md border border-slate-900 py-1 px-2 text-xs font-semibold text-slate-500">Investments</button>
      <button id="assets-tab" hx-get="/accounts/assets" class="tab rounded-md border border-slate-900 py-1 px-2 text-xs font-semibold text-slate-500">Assets</button>
    </div>
    <button 
      id="add-account-button"
      type="button" 
      title="Connect new account" 
      class="py-1 ps-2.5 pe-3 inline-flex items-center gap-x-1 text-xs font-semibold rounded
      text-slate-100 bg-teal-800 hover:bg-teal-700 active:bg-teal-800 hover:bg-slate-800/50 disabled:opacity-50 
      disabled:pointer-events-none dark:focus:outline-none">
      <svg viewBox="0 0 24 24" class="size-3 fill-none stroke-2 stroke-slate-100">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
      </svg>
      Add
    </button>
    <script>
      htmx.on("#add-account-button", "click",
        async function(evt) {
          fetch("/accounts/connect")
            .then(async function(response) {
              return response.json();
            }).then(async function(json) {
              const stripe = new Stripe("{{ stripe_pub_key }}");
              const sessionResult = await stripe.collectFinancialConnectionsAccounts({
                clientSecret: json["client_secret"]
              }).then(async function(result) {
                if (result.error) {
                  // Inform the customer that there was an error.
                  console.log(result.error.message);
                // Handle next step based on length of accounts array
                } else if (result.financialConnectionsSession.accounts.length === 0) {
                  console.log('No accounts were linked');
                } else {
                  //console.log(result.financialConnectionsSession.accounts)
                  event = new CustomEvent("stripeAccountsCollected")
                  e = document.getElementById("accounts-partial-list")
                  e.dispatchEvent(event)
                }
              });
            });
        }
      );
    </script>
  </div>
  {% include "accounts/list-partial.html" %}
</div>
